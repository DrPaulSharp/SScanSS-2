<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>sscanss.core.geometry.intersection &#8212; SScanSS 2 0.0.1-alpha documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="sscanss.core.geometry.mesh" href="sscanss.core.geometry.mesh.html" />
    <link rel="prev" title="sscanss.core.geometry.colour" href="sscanss.core.geometry.colour.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          SScanSS 2</a>
        <span class="navbar-text navbar-version pull-left"><b>0.0.1-alpha</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul>
<li class="toctree-l1"><a class="reference internal" href="../overview.html">General Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../example.html">Example Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_sample.html">Insert Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="../transform_sample.html">Transform Sample</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_fiducials.html">Insert Fiducial Points</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_measurements.html">Insert Measurement Points</a></li>
<li class="toctree-l1"><a class="reference internal" href="../add_vectors.html">Insert Measurement Vectors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../configure_instrument.html">Instrument Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../align_sample.html">Align Sample on Instrument</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulation.html">Simulating Experiments</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api.html#indices-and-tables">Indices and tables</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">sscanss.core.geometry.intersection</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="module-sscanss.core.geometry.intersection">
<span id="sscanss-core-geometry-intersection"></span><h1>sscanss.core.geometry.intersection<a class="headerlink" href="#module-sscanss.core.geometry.intersection" title="Permalink to this headline">¶</a></h1>
<p>Functions for geometry intersection and path length calculation</p>
<p class="rubric">Functions</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#sscanss.core.geometry.intersection.closest_triangle_to_point" title="sscanss.core.geometry.intersection.closest_triangle_to_point"><code class="xref py py-obj docutils literal notranslate"><span class="pre">closest_triangle_to_point</span></code></a>(faces,&nbsp;points)</td>
<td>Computes the closest face to a given 3D point.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sscanss.core.geometry.intersection.mesh_plane_intersection" title="sscanss.core.geometry.intersection.mesh_plane_intersection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">mesh_plane_intersection</span></code></a>(mesh,&nbsp;plane)</td>
<td>Gets the intersection between a triangular mesh and a plane.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sscanss.core.geometry.intersection.path_length_calculation" title="sscanss.core.geometry.intersection.path_length_calculation"><code class="xref py py-obj docutils literal notranslate"><span class="pre">path_length_calculation</span></code></a>(mesh,&nbsp;gauge_volume,&nbsp;…)</td>
<td>Calculates the path length of the beam through a sample model.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sscanss.core.geometry.intersection.segment_plane_intersection" title="sscanss.core.geometry.intersection.segment_plane_intersection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_plane_intersection</span></code></a>(point_a,&nbsp;point_b,&nbsp;…)</td>
<td>Gets the intersection between a line segment and a plane</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sscanss.core.geometry.intersection.segment_triangle_intersection" title="sscanss.core.geometry.intersection.segment_triangle_intersection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">segment_triangle_intersection</span></code></a>(origin,&nbsp;…[,&nbsp;tol])</td>
<td>Calculates the intersection points between a line segment and triangle mesh.</td>
</tr>
</tbody>
</table>
<dl class="function">
<dt id="sscanss.core.geometry.intersection.closest_triangle_to_point">
<code class="descclassname">sscanss.core.geometry.intersection.</code><code class="descname">closest_triangle_to_point</code><span class="sig-paren">(</span><em>faces</em>, <em>points</em><span class="sig-paren">)</span><a class="headerlink" href="#sscanss.core.geometry.intersection.closest_triangle_to_point" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the closest face to a given 3D point. Assumes face is triangular.
Based on code from <a class="reference external" href="http://www.iquilezles.org/www/articles/triangledistance/triangledistance.htm">http://www.iquilezles.org/www/articles/triangledistance/triangledistance.htm</a></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>faces</strong> (<em>numpy.ndarray</em>) – faces: N x 9 array of triangular face vertices</li>
<li><strong>points</strong> (<em>numpy.ndarray</em>) – M x 3 array of points to find closest faces</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">M x 9 array of faces corresponding to points</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">numpy.ndarray</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sscanss.core.geometry.intersection.mesh_plane_intersection">
<code class="descclassname">sscanss.core.geometry.intersection.</code><code class="descname">mesh_plane_intersection</code><span class="sig-paren">(</span><em>mesh</em>, <em>plane</em><span class="sig-paren">)</span><a class="headerlink" href="#sscanss.core.geometry.intersection.mesh_plane_intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the intersection between a triangular mesh and a plane. The algorithm returns
a set of lines is points pairs where each even indexed point is the start of a line
and the next point is the end. An empty list implies no intersection.
Based on code from <em>Real-Time Collision Detection (1st Edition) By Christer Ericson</em></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mesh</strong> (<a class="reference internal" href="sscanss.core.geometry.mesh.html#sscanss.core.geometry.mesh.Mesh" title="sscanss.core.geometry.mesh.Mesh"><em>Mesh</em></a>) – a triangular mesh</li>
<li><strong>plane</strong> (<a class="reference internal" href="sscanss.core.math.structure.html#sscanss.core.math.structure.Plane" title="sscanss.core.math.structure.Plane"><em>Plane</em></a>) – plane normal and point</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">array of points pairs</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">List[numpy.ndarray]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sscanss.core.geometry.intersection.path_length_calculation">
<code class="descclassname">sscanss.core.geometry.intersection.</code><code class="descname">path_length_calculation</code><span class="sig-paren">(</span><em>mesh</em>, <em>gauge_volume</em>, <em>beam_axis</em>, <em>diff_axis</em><span class="sig-paren">)</span><a class="headerlink" href="#sscanss.core.geometry.intersection.path_length_calculation" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the path length of the beam through a sample model. It assumes that the beam starts outside the
sample and every pair of face intersections is taken as beam entry and exit from the sample. The path length is
set to zero if beam hits the gauge volume outside the sample or an entry/exit face pair is not found.
This technique could give incorrect results if the sample has internal faces or spurious faces from bad scanning
intersect with the beam.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>mesh</strong> (<a class="reference internal" href="sscanss.core.geometry.mesh.html#sscanss.core.geometry.mesh.Mesh" title="sscanss.core.geometry.mesh.Mesh"><em>Mesh</em></a>) – a triangular mesh</li>
<li><strong>gauge_volume</strong> (<a class="reference internal" href="sscanss.core.math.vector.html#sscanss.core.math.vector.Vector3" title="sscanss.core.math.vector.Vector3"><em>Vector3</em></a>) – The centre of the gauge volume</li>
<li><strong>beam_axis</strong> (<a class="reference internal" href="sscanss.core.math.vector.html#sscanss.core.math.vector.Vector3" title="sscanss.core.math.vector.Vector3"><em>Vector3</em></a>) – The direction of the beam</li>
<li><strong>diff_axis</strong> (<em>List</em><em>[</em><a class="reference internal" href="sscanss.core.math.vector.html#sscanss.core.math.vector.Vector3" title="sscanss.core.math.vector.Vector3"><em>Vector3</em></a><em>]</em>) – The direction of the beam</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Path length from beam origin to each detector</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Tuple[float]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sscanss.core.geometry.intersection.segment_plane_intersection">
<code class="descclassname">sscanss.core.geometry.intersection.</code><code class="descname">segment_plane_intersection</code><span class="sig-paren">(</span><em>point_a</em>, <em>point_b</em>, <em>plane</em><span class="sig-paren">)</span><a class="headerlink" href="#sscanss.core.geometry.intersection.segment_plane_intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Gets the intersection between a line segment and a plane</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>point_a</strong> (<em>numpy.ndarray</em>) – 3D starting point of the segment</li>
<li><strong>point_b</strong> (<em>numpy.ndarray</em>) – 3D ending point of the segment</li>
<li><strong>plane</strong> (<a class="reference internal" href="sscanss.core.math.structure.html#sscanss.core.math.structure.Plane" title="sscanss.core.math.structure.Plane"><em>Plane</em></a>) – the plane</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">point of intersection or None if no intersection</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Union[numpy.ndarray, None]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="sscanss.core.geometry.intersection.segment_triangle_intersection">
<code class="descclassname">sscanss.core.geometry.intersection.</code><code class="descname">segment_triangle_intersection</code><span class="sig-paren">(</span><em>origin</em>, <em>direction</em>, <em>length</em>, <em>faces</em>, <em>tol=1e-05</em><span class="sig-paren">)</span><a class="headerlink" href="#sscanss.core.geometry.intersection.segment_triangle_intersection" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the intersection points between a line segment and triangle mesh.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>origin</strong> (<a class="reference internal" href="sscanss.core.math.vector.html#sscanss.core.math.vector.Vector3" title="sscanss.core.math.vector.Vector3"><em>Vector3</em></a>) – origin of segment</li>
<li><strong>direction</strong> (<a class="reference internal" href="sscanss.core.math.vector.html#sscanss.core.math.vector.Vector3" title="sscanss.core.math.vector.Vector3"><em>Vector3</em></a>) – normalized direction of segment</li>
<li><strong>length</strong> (<em>float</em>) – length of segment</li>
<li><strong>faces</strong> (<em>numpy.ndarray</em>) – faces: N x 9 array of triangular face vertices</li>
<li><strong>tol</strong> (<em>float</em>) – tolerance to determine if distance is unique</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">a flag indicating if intersect occurred and the unique sorted distances of occurrences</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Tuple[float, numpy.ndarray]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2018-2019, ISIS Neutron and Muon Source.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>